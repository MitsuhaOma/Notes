#### `JOIN`连接

**本质：**各个连接表中的记录都取出来依次匹配的组合加入结果集并返回给用户,其实就是用两张表求笛卡尔积得到的结果集

**示意图：**

![](https://user-gold-cdn.xitu.io/2018/12/25/167e43ab3feccc29?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

**语法：**

```mysql
mysql> SELECT * FROM t1, t2, ..., tn;
# 理论上可以链接任意张表，但是表与表的链接所建立的笛卡尔积结果集可能是非常巨大的，我们有必要在连接时就进行过滤
```

**大致执行过程**

1. 确定第一个需要查询的表，即**`驱动表`**，并使用**与驱动表相关的**搜索条件获得结果集
2. 针对上一步骤中从驱动表中产生的结果集中的每一个记录，分别需要到另一个表中去查找符合其他过滤条件的记录，此时，另一张表被称为**`被驱动表`**

> 在两表链接查询中，驱动表只需要访问一次，而被驱动表则需要根据驱动表访问后得到的结果集被访问多次（次数为结果集中记录数）

----

#### 内连接与外链接

**目的：**为了解决驱动表中的记录即使在被驱动表中没有匹配的记录，也需要加入到结果集的需求

**区分：**

- 对于`内连接`的两个表，驱动表中的记录在被驱动表中找不到匹配的记录，该记录不会加入到最后的结果集。
- 对于`外连接`的两个表，驱动表中的记录即使在被驱动表中没有匹配的记录，也仍然需要加入到结果集。

----

#### 外链接

在`Mysql`中，两表查询，根据选取驱动表的不同，外链接仍然细分为两种：

- 左外链接：选取左侧的表为驱动表
- 右外链接：选取右侧的表为驱动表

**新的需求！！！**我们有时候也并不像将驱动表的全部记录加入到最后的结果集。**因此，加入了两种不同的过滤形式。**

- `WHERE`:通用的过滤条件

  不管是内连接还是外链接，只要不符合`WHERE`中的过滤条件的记录都不会被加入到最后的结果集。

- `ON` 连接条件

  ***仅针对外链接表，***如果无法在被驱动表中找到匹配`ON`中的过滤条件的记录，那么该记录仍会被加入到结果集中，对应的被驱动表记录的各个字段会用`NULL`值填充。

  **在内连接中**，`WHERE`与`ON`等价

> 推荐将`ON`直接记成只能在外链接使用

**语法：**

- 左外链接

  - 使用

    ```mysql
    # 左侧t1为驱动表，右侧t2为被驱动表
    mysql> SELECT * FROM t1 LEFT JOIN t2 ON 链接条件 [WHERE 通用过滤条件]; 
    ```

- 右外链接

  - 使用

    ```mysql
    # 右侧t2为驱动表，左侧t1为被驱动表
    mysql> SELECT * FROM t1 RIGHT JOIN t2 ON 链接条件 [WHERE 通用过滤条件];
    ```

    